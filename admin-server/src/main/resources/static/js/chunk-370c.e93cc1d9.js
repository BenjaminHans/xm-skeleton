(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-370c","chunk-cbf9"],{"08a4":function(t,n,e){},"365c":function(t,n,e){"use strict";e.d(n,"U",function(){return o}),e.d(n,"K",function(){return c}),e.d(n,"X",function(){return i}),e.d(n,"cb",function(){return a}),e.d(n,"db",function(){return u}),e.d(n,"h",function(){return s}),e.d(n,"bb",function(){return l}),e.d(n,"T",function(){return d}),e.d(n,"g",function(){return f}),e.d(n,"D",function(){return b}),e.d(n,"G",function(){return m}),e.d(n,"t",function(){return g}),e.d(n,"q",function(){return p}),e.d(n,"V",function(){return h}),e.d(n,"W",function(){return j}),e.d(n,"c",function(){return O}),e.d(n,"v",function(){return y}),e.d(n,"l",function(){return v}),e.d(n,"J",function(){return z}),e.d(n,"R",function(){return L}),e.d(n,"f",function(){return k}),e.d(n,"B",function(){return w}),e.d(n,"ab",function(){return C}),e.d(n,"C",function(){return B}),e.d(n,"p",function(){return S}),e.d(n,"I",function(){return x}),e.d(n,"d",function(){return A}),e.d(n,"y",function(){return _}),e.d(n,"n",function(){return I}),e.d(n,"N",function(){return $}),e.d(n,"S",function(){return M}),e.d(n,"m",function(){return N}),e.d(n,"j",function(){return T}),e.d(n,"L",function(){return R}),e.d(n,"b",function(){return q}),e.d(n,"u",function(){return P}),e.d(n,"F",function(){return J}),e.d(n,"s",function(){return Q}),e.d(n,"k",function(){return V}),e.d(n,"M",function(){return E}),e.d(n,"P",function(){return F}),e.d(n,"e",function(){return D}),e.d(n,"z",function(){return Y}),e.d(n,"Y",function(){return Z}),e.d(n,"Z",function(){return G}),e.d(n,"o",function(){return H}),e.d(n,"O",function(){return K}),e.d(n,"H",function(){return U}),e.d(n,"x",function(){return W}),e.d(n,"A",function(){return X}),e.d(n,"w",function(){return tt}),e.d(n,"a",function(){return nt}),e.d(n,"i",function(){return et}),e.d(n,"Q",function(){return rt}),e.d(n,"E",function(){return ot}),e.d(n,"r",function(){return ct});e("cadf"),e("551c"),e("097d");var r=e("7f80"),o=function(t){return Object(r["b"])("/common/captcha/init")},c=function(t,n){return Object(r["b"])("/common/captcha/draw/".concat(t))},i=function(t){return Object(r["c"])("/login",t)},a=function(t){return Object(r["b"])("/user/info",t)},u=function(t){return Object(r["c"])("/user/edit",t)},s=function(t){return Object(r["c"])("/user/modifyPass",t)},l=function(t){return Object(r["c"])("/user/unlock",t)},d=function(t){return Object(r["b"])("/user/getByCondition",t)},f=function(t){return Object(r["c"])("/user/admin/add",t)},b=function(t){return Object(r["c"])("/user/admin/edit",t)},m=function(t,n){return Object(r["c"])("/user/admin/enable/".concat(t),n)},g=function(t,n){return Object(r["c"])("/user/admin/disable/".concat(t),n)},p=function(t,n){return Object(r["a"])("/user/delByIds/".concat(t),n)},h=function(t){return Object(r["b"])("/department/getByParentId/0",t)},j=function(t,n){return Object(r["b"])("/department/getByParentId/".concat(t),n)},O=function(t){return Object(r["c"])("/department/add",t)},y=function(t){return Object(r["c"])("/department/edit",t)},v=function(t,n){return Object(r["a"])("/department/delByIds/".concat(t),n)},z=function(t){return Object(r["b"])("/role/getAllList",t)},L=function(t){return Object(r["b"])("/role/getAllByPage",t)},k=function(t){return Object(r["c"])("/role/save",t)},w=function(t){return Object(r["c"])("/role/edit",t)},C=function(t){return Object(r["c"])("/role/setDefault",t)},B=function(t,n){return Object(r["c"])("/role/editRolePerm/".concat(t),n)},S=function(t,n){return Object(r["a"])("/role/delAllByIds/".concat(t),n)},x=function(t){return Object(r["b"])("/permission/getAllList",t)},A=function(t){return Object(r["c"])("/permission/add",t)},_=function(t){return Object(r["c"])("/permission/edit",t)},I=function(t,n){return Object(r["a"])("/permission/delByIds/".concat(t),n)},$=function(t){return Object(r["b"])("/log/getAllByPage",t)},M=function(t){return Object(r["b"])("/log/search",t)},N=function(t,n){return Object(r["a"])("/log/delByIds/".concat(t),n)},T=function(t){return Object(r["a"])("/log/delAll",t)},R=function(t){return Object(r["b"])("/config/getByCondition",t)},q=function(t){return Object(r["c"])("/config/add",t)},P=function(t){return Object(r["c"])("/config/edit",t)},J=function(t,n){return Object(r["c"])("/config/enable/".concat(t),n)},Q=function(t,n){return Object(r["c"])("/config/disable/".concat(t),n)},V=function(t,n){return Object(r["a"])("/config/delByIds/".concat(t),n)},E=function(){return Object(r["b"])("/home/statistics")},F=function(t){return Object(r["b"])("/quartzJob/getAllByPage",t)},D=function(t){return Object(r["c"])("/quartzJob/add",t)},Y=function(t){return Object(r["c"])("/quartzJob/edit",t)},Z=function(t){return Object(r["c"])("/quartzJob/pause",t)},G=function(t){return Object(r["c"])("/quartzJob/resume",t)},H=function(t,n){return Object(r["a"])("/quartzJob/delByIds/".concat(t),n)},K=function(t){return Object(r["b"])("/profit/getByCondition",t)},U=function(t){return Object(r["b"])("/agent/getByCondition",t)},W=function(t){return Object(r["c"])("/agent/changeMobile",t)},X=function(t){return Object(r["c"])("/agent/changeRelation",t)},tt=function(t){return Object(r["c"])("/agent/changeLevel",t)},nt=function(t){return Object(r["c"])("/agent/add",t)},et=function(t){return Object(r["c"])("/agent/checkRecommend",t)},rt=function(t){return Object(r["c"])("/agent/getMyRecommend",t)},ot=function(t,n){return Object(r["c"])("/agent/enableAreaAgent/".concat(t),n)},ct=function(t,n,e){return Object(r["c"])("/agent/disableAreaAgent/".concat(t,"/").concat(n),e)}},8364:function(t,n,e){"use strict";var r=e("f864"),o=e.n(r);o.a},8465:function(t,n,e){"use strict";e.r(n);var r=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticStyle:{display:"inline-block"}},[e("Icon",{staticClass:"spin-icon-load",attrs:{type:"ios-loading",size:"18",color:"#2d8cf0"}})],1)},o=[],c={name:"circleLoading"},i=c,a=(e("8364"),e("2877")),u=Object(a["a"])(i,r,o,!1,null,null,null);u.options.__file="circle-loading.vue";n["default"]=u.exports},d254:function(t,n,e){"use strict";e.r(n);var r=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"search"},[e("Row",[e("Col",[e("Card",[e("Row",{staticClass:"operation"},[e("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:t.addRole}},[t._v("安排新任务")]),e("Button",{attrs:{icon:"md-trash"},on:{click:t.delAll}},[t._v("批量删除")]),e("Button",{attrs:{icon:"md-refresh"},on:{click:t.init}},[t._v("刷新")]),t.operationLoading?e("circleLoading"):t._e()],1),e("Row",[e("Alert",{attrs:{"show-icon":""}},[t._v("\n                        已选择 "),e("span",{staticClass:"select-count"},[t._v(t._s(t.selectCount))]),t._v(" 项\n                        "),e("a",{staticClass:"select-clear",on:{click:t.clearSelectAll}},[t._v("清空")])])],1),e("Row",[e("Table",{ref:"table",attrs:{loading:t.loading,border:"",columns:t.columns,data:t.data,sortable:"custom"},on:{"on-sort-change":t.changeSort,"on-selection-change":t.changeSelect}})],1),e("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[e("Page",{attrs:{current:t.pageNumber,total:t.total,"page-size":t.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1)],1)],1)],1),e("Modal",{attrs:{title:t.modalTitle,"mask-closable":!1,width:500},model:{value:t.modalVisible,callback:function(n){t.modalVisible=n},expression:"modalVisible"}},[e("Form",{ref:"form",attrs:{model:t.form,"label-width":80,rules:t.formValidate}},[e("FormItem",{attrs:{label:"任务类名",prop:"jobClassName"}},[e("Input",{attrs:{placeholder:"例如 com.xm.admin.quartz.jobs.Job",clearable:""},model:{value:t.form.jobClassName,callback:function(n){t.$set(t.form,"jobClassName",n)},expression:"form.jobClassName"}})],1),e("FormItem",{staticStyle:{"margin-bottom":"5px"},attrs:{label:"cron表达式",prop:"cronExpression"}},[e("Input",{attrs:{clearable:""},model:{value:t.form.cronExpression,callback:function(n){t.$set(t.form,"cronExpression",n)},expression:"form.cronExpression"}}),e("a",{attrs:{target:"_blank",href:"http://cron.qqe2.com/"}},[e("Icon",{staticStyle:{margin:"0 3px 3px 0"},attrs:{type:"md-arrow-dropright-circle",size:"16"}}),t._v(" \n            在线cron表达式生成\n          ")],1)],1),e("FormItem",{attrs:{label:"参数",prop:"parameter"}},[e("Input",{model:{value:t.form.parameter,callback:function(n){t.$set(t.form,"parameter",n)},expression:"form.parameter"}})],1),e("FormItem",{attrs:{label:"备注",prop:"description"}},[e("Input",{model:{value:t.form.description,callback:function(n){t.$set(t.form,"description",n)},expression:"form.description"}})],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{type:"text"},on:{click:t.cancelSubmit}},[t._v("取消")]),e("Button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:t.handleSubmit}},[t._v("保存并安排")])],1)],1)],1)},o=[],c=(e("ac6a"),e("365c")),i=e("8465"),a={name:"quartz-manage",components:{circleLoading:i["default"]},data:function(){var t=this;return{loading:!0,operationLoading:!1,sortColumn:"createdAt",sortType:"desc",modalType:0,modalVisible:!1,modalTitle:"",form:{id:"",paramter:"",description:""},formValidate:{jobClassName:[{required:!0,message:"任务类名不能为空",trigger:"blur"}],cronExpression:[{required:!0,message:"cron表达式不能为空",trigger:"blur"}]},submitLoading:!1,selectList:[],selectCount:0,columns:[{type:"selection",width:60,align:"center"},{type:"index",width:60,align:"center"},{title:"任务类名",key:"jobClassName",sortable:!0,width:200},{title:"cron表达式",key:"cronExpression",sortable:!0},{title:"参数",key:"parameter",sortable:!0},{title:"备注",key:"description",sortable:!0,width:180},{title:"状态",key:"status",align:"center",width:140,render:function(t,n){return 0===n.row.status?t("div",[t("Tag",{props:{type:"dot",color:"success"}},"执行中")]):-1===n.row.status?t("div",[t("Tag",{props:{type:"dot",color:"error"}},"已停止")]):void 0},filters:[{label:"执行中",value:0},{label:"已停止",value:-1}],filterMultiple:!1,filterMethod:function(t,n){return 0===t?0===n.status:-1===t?-1===n.status:void 0}},{title:"操作",key:"action",align:"center",width:280,render:function(n,e){var r="";return r=0==e.row.status?n("Button",{props:{type:"warning",size:"small",icon:"md-pause"},style:{marginRight:"5px"},on:{click:function(){t.pause(e.row)}}},"暂停"):n("Button",{props:{type:"info",size:"small",icon:"md-play"},style:{marginRight:"5px"},on:{click:function(){t.resume(e.row)}}},"恢复执行"),n("div",[r,n("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.edit(e.row)}}},"编辑"),n("Button",{props:{type:"error",size:"small"},on:{click:function(){t.remove(e.row)}}},"删除")])}}],data:[],pageNumber:1,pageSize:10,total:0}},methods:{init:function(){this.getQuartzList()},changePage:function(t){this.pageNumber=t,this.getQuartzList(),this.clearSelectAll()},changePageSize:function(t){this.pageSize=t,this.getQuartzList()},changeSort:function(t){this.sortColumn=t.key,this.sortType=t.order,"normal"===t.order&&(this.sortType=""),this.getQuartzList()},getQuartzList:function(){var t=this;this.loading=!0;var n={pageNumber:this.pageNumber,pageSize:this.pageSize,sort:this.sortColumn,order:this.sortType};Object(c["P"])(n).then(function(n){t.loading=!1,!0===n.success&&(t.data=n.result.content,t.total=n.result.totalElements)})},cancelSubmit:function(){this.modalVisible=!1},handleSubmit:function(){var t=this;this.$refs.form.validate(function(n){n&&(0===t.modalType?(t.submitLoading=!0,Object(c["e"])(t.form).then(function(n){t.submitLoading=!1,!0===n.success&&(t.$Message.success("操作成功"),t.getQuartzList(),t.modalVisible=!1)})):(t.submitLoading=!0,Object(c["z"])(t.form).then(function(n){t.submitLoading=!1,!0===n.success&&(t.$Message.success("操作成功"),t.getQuartzList(),t.modalVisible=!1)})))})},addRole:function(){this.modalType=0,this.modalTitle="添加任务",this.$refs.form.resetFields(),this.form={paramter:"",description:""},this.modalVisible=!0},edit:function(t){for(var n in this.modalType=1,this.modalTitle="编辑任务",t)null===t[n]&&(t[n]="");var e=JSON.stringify(t),r=JSON.parse(e);this.form=r,this.modalVisible=!0},pause:function(t){var n=this;this.$Modal.confirm({title:"确认停止",content:"您确认要停止任务 "+t.jobClassName+" ?",onOk:function(){n.operationLoading=!0,Object(c["Y"])(t).then(function(t){n.operationLoading=!1,!0===t.success&&(n.$Message.success("操作成功"),n.getQuartzList())})}})},resume:function(t){var n=this;this.$Modal.confirm({title:"确认恢复",content:"您确认要恢复任务 "+t.jobClassName+" ?",onOk:function(){n.operationLoading=!0,Object(c["Z"])(t).then(function(t){n.operationLoading=!1,!0===t.success&&(n.$Message.success("操作成功"),n.getQuartzList())})}})},remove:function(t){var n=this;this.$Modal.confirm({title:"确认删除",content:"您确认要删除任务 "+t.jobClassName+" ?",onOk:function(){n.operationLoading=!0,Object(c["o"])(t.id).then(function(t){n.operationLoading=!1,!0===t.success&&(n.$Message.success("操作成功"),n.getQuartzList())})}})},clearSelectAll:function(){this.$refs.table.selectAll(!1)},changeSelect:function(t){this.selectList=t,this.selectCount=t.length},delAll:function(){var t=this;this.selectCount<=0?this.$Message.warning("您还未选择要删除的数据"):this.$Modal.confirm({title:"确认删除",content:"您确认要删除所选的 "+this.selectCount+" 条数据?",onOk:function(){var n="";t.selectList.forEach(function(t){n+=t.id+","}),n=n.substring(0,n.length-1),t.operationLoading=!0,Object(c["o"])(n).then(function(n){t.operationLoading=!1,!0===n.success&&(t.$Message.success("删除成功"),t.clearSelectAll(),t.getQuartzList())})}})}},mounted:function(){this.init()}},u=a,s=(e("edda"),e("2877")),l=Object(s["a"])(u,r,o,!1,null,null,null);l.options.__file="quartzManage.vue";n["default"]=l.exports},edda:function(t,n,e){"use strict";var r=e("08a4"),o=e.n(r);o.a},f864:function(t,n,e){}}]);